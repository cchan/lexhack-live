<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset='utf-8'>
	<meta http-equiv='X-UA-Compatible' content='IE=edge'>
	<meta name='viewport' content='width=device-width, initial-scale=1'>
	<meta name='description' content='LexHack is a 12 hour hackathon for high schoolers of all programming abilities. [Live event website]'>
	<meta name='author' content='Clive Chan (http://clive.io)'>
	<title>LexHack</title>
	<link rel='icon' type='image/ico' href='favicon.ico'>
	
	<link rel="stylesheet" href="style.css">
	<noscript><!-- lol -->
		<style>
			#clock, #caption, #live{left: 0; opacity: 1;}
			#delaunay{opacity:0.6}
			#button1, #button2, #button3{display:inline-block;}
		</style>
	</noscript>
</head>
<body>
<div id="wrapper">
	<h1>
		<a href="http://lexhack.org" style="text-decoration:none;">
			<span style='color:#fff;'>&lt;&nbsp;<span class="first-letter">L</span>ex</span><span style='color:#ffc747'><span class="first-letter">H</span>ack&nbsp;&gt;</span>
		</a>
	</h1>
	<h2 id="live" class="slider">
		{<span>live</span>}
	</h2>
	<table id="clock" class="slider">
		<tr>
			<td><span class="d"></span><small>d</small></td>
			<td><span class="h"></span><small>h</small></td>
			<td><span class="m"></span><small>m</small></td>
			<td><span class="s"></span><small>s</small></td>
		</tr>
	</table>
	<table id="clock2" class="slider">
		<tr>
			<td><span class="d"></span><small>d</small></td>
			<td><span class="h"></span><small>h</small></td>
		</tr>
		<tr>
			<td><span class="m"></span><small>m</small></td>
			<td><span class="s"></span><small>s</small></td>
		</tr>
	</table>
	<div id="caption" class="slider">
		<span style="color:#444">opening ceremony</span> <span style="color:#eee"><span>Sept. 19, 2015, 9AM</span> <span>@ LHS Auditorium</span></span>
	</div>
	
	<style>.heightless{font-size:4em;height:0;overflow-y:visible;margin-top:1.5em;margin-bottom:-1.5em;}</style>
	<div id="spots150" class="slider heightless">150 spots.</div>
	<div id="dontwait" class="slider heightless">Don't wait.</div>
	
	<a href="http://lexhack.org/mentor-registration.html" id="button1" class="slider">Mentor Registration</a>
	<a href="http://lexhack.org/registration.html" id="button2" class="slider">Hacker Registration</a>
	<a href="http://lexhack.org" id="button3" class="slider">Main Website</a>
</div>

<canvas id="testcanvas" style="display:none;"></canvas>

<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script>
	$(function(){
		//TIMER
		function updateTime(){
			var result = "";
			var totalSec = (Date.parse("Sep 19 2015 9:00:00 AM") - Date.now())/1000;
			var days = parseInt( totalSec / 86400 );
			var hours = parseInt( totalSec / 3600 ) % 24;
			var minutes = parseInt( totalSec / 60 ) % 60;
			var seconds = totalSec % 60;
			var seconds = Math.floor(seconds);

			$(".d").html(days < 10 ? "0" + days : days);
			$(".h").html(hours < 10 ? "0" + hours : hours);
			$(".m").html(minutes < 10 ? "0" + minutes : minutes);
			$(".s").html(seconds < 10 ? "0" + seconds : seconds);
		}
		updateTime();
		
		//SLIDE-INS
		var currentSliderTime = 0;
		function slider(sel, msDelay){
			currentSliderTime += msDelay;
			setTimeout(function(){
				$(sel).css({top:0,left:0,right:0,bottom:0,opacity:1});
			},currentSliderTime);
		}
		function slideout(sel, msDelay, css){
			currentSliderTime += msDelay;
			setTimeout(function(){
				if(!css)var css={};
				css.opacity = 0;
				$(sel).css(css);
			},currentSliderTime);
		}
		
		setInterval(updateTime,1000);
		
		slider("#clock,#clock2",500);
		slider("#caption",500);
		
		slider("#spots150",1000);
		slideout("#spots150",1500);
		slider("#dontwait",300);
		slideout("#dontwait",1500);
		
		slider("#button1",300);
		slider("#button3",130);
		slider("#button2",130);
		//slider("#live",2000);
		
		setTimeout(function(){
			delaunay.redraw();//First draw when the canvas starts fading in
			$("#delaunay").css({opacity:0.6});
			$("#button1,#button2,#button3").css({top:"20px"}); //so the window size isn't messed up on initial measurement
		},500);
		
		setTimeout(function(){
			delaunay.start();
		},2000); //start after all the stuff has slid in
	});
	</script>
	<script src="delaunay.js"></script>
</body>
</html>
